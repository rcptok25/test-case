{
    "sourceFile": "pages/Login.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1661890270478,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1661890270478,
            "name": "Commit-0",
            "content": "import { useState, useEffect } from 'react'\r\nimport { useRouter } from 'next/router'\r\nimport Image from 'next/image'\r\nimport axios from './apiConfig/axios'\r\nimport LoginPagebg from './../styles/images/login_bg.png'\r\n\r\n\r\nexport default function Login() {\r\n  const [username, setUsername] = useState()\r\n  const [password, setPassword] = useState()\r\n  const router = useRouter()\r\n\r\n\r\n  useEffect(() => {\r\n    let indexPage = \"\";\r\n\r\n    axios.get(`usersControl.php`).then(response => {\r\n      indexPage = JSON.stringify(response.data.indexPage);\r\n\r\n      if (indexPage) {\r\n\r\n      }\r\n      else {\r\n        router.push('./Register')\r\n      }\r\n\r\n\r\n\r\n\r\n    });\r\n\r\n  })\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    axios.post(`userLogin.php`, { username, password }).then(response => {\r\n\r\n\r\n      if (response.data.message) {\r\n        if (response.data.userData.UserType === \"admin\") {\r\n          window.sessionStorage.setItem(\"username\", response.data.userData.Username);\r\n          router.push('./admin')\r\n\r\n        }\r\n        else if (response.data.userData.UserType === \"user\") {\r\n          window.sessionStorage.setItem(\"username\", response.data.userData.Username);\r\n          router.push('./user')\r\n        }\r\n      }\r\n      else {\r\n        console.log(\"error! try again.\")\r\n      }\r\n\r\n\r\n\r\n    });\r\n\r\n  }\r\n\r\n\r\n  return (\r\n\r\n    <section className=\"flex flex-col md:flex-row h-screen items-center\">\r\n      <div className=\" hidden lg:block w-full md:w-1/2 xl:w-2/3 h-screen\">\r\n        <Image src={LoginPagebg} alt=\"\" className=\"w-full h-auto   object-contain\" />\r\n      </div>\r\n      <div\r\n        className=\"bg-white w-full md:max-w-md lg:max-w-full md:mx-auto md:mx-0 md:w-1/2 xl:w-1/3 h-screen px-6 lg:px-16 xl:px-12\r\n    flex items-center justify-center\"\r\n      >\r\n        <div className=\"w-full h-100\">\r\n          <h1 className=\"text-xl font-bold\">TestApp - Login</h1>\r\n          <h1 className=\"text-xl md:text-2xl font-bold leading-tight mt-12\">\r\n            Log in to your account\r\n          </h1>\r\n          <form className=\"mt-6\" action=\"#\" method=\"POST\" onSubmit={handleSubmit}>\r\n            <div>\r\n              <label className=\"block text-gray-700\">Username</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"\"\r\n                id=\"\"\r\n                onChange={(e) => setUsername(e.target.value)}\r\n                placeholder=\"Enter Username\"\r\n                className=\"w-full px-4 py-3 rounded-lg bg-gray-200 mt-2 border focus:border-blue-500 focus:bg-white focus:outline-none\"\r\n                autofocus=\"\"\r\n                autoComplete=\"\"\r\n                required=\"\"\r\n              />\r\n            </div>\r\n            <div className=\"mt-4\">\r\n              <label className=\"block text-gray-700\">Password</label>\r\n              <input\r\n                type=\"password\"\r\n                name=\"\"\r\n                id=\"\"\r\n                placeholder=\"Enter Password\"\r\n\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                className=\"w-full px-4 py-3 rounded-lg bg-gray-200 mt-2 border focus:border-blue-500\r\n            focus:bg-white focus:outline-none\"\r\n                required=\"\"\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"w-full block bg-blue-500 hover:bg-blue-400 focus:bg-blue-400 text-white font-semibold rounded-lg\r\n          px-4 py-3 mt-6\"\r\n            >\r\n              Log In\r\n            </button>\r\n          </form>\r\n\r\n\r\n          <p className=\"text-sm text-gray-500 mt-12\">\r\n            Â© 2022 TestApp - All Rights Reserved.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n  )\r\n}\r\n"
        }
    ]
}