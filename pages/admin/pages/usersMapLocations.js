import { useDemo, useState,useEffect } from 'react'
import GoogleMapReact from 'google-map-react';
import Head from "next/head";
import SideNavBar from './../component/SideNavbar'



export default function usersMapLocations() {

 

  const [latLng, setLatLng] = useState();
  const [maps, setMaps] = useState(null);
  const [map, setMap] = useState(null);
  const [location,setLocation]=useState("Maps Location")

  const MapMarker = ({ position, maps, map }) => {

    useEffect(() => {
        const marker = new maps.Marker({
            position,
            map,
            title: "Hello World!",
        });
        setLocation("Lat: "+position?.lat+", Lng: "+position?.lng)
    }, [position?.lat,position?.lng])
    return (
        <></>
    )
  
  }



  const handleApiLoaded = (map, maps) => {
      setMap(map);
      setMaps(maps);
      map.setOptions({
       
          fullscreenControl: false,
          mapTypeControl: true,
          mapTypeControlOptions: {
            
          
              style: maps.MapTypeControlStyle.DEFAULT,
              position: maps.ControlPosition.TOP_CENTER,
              mapTypeIds: ["roadmap", "satellite"],
          },
          zoomControl: false,
      });
  };

  const defaultProps = {
      center: {
          lat: 10.99835602,
          lng: 77.01502627
      },
      zoom: 11
  };


  return (
    <>
      <Head>
        <title>Test Case - Users Map Locations</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/pro.ico" />
      </Head>
      <div className="md:flex min-h-screen relative">
        <SideNavBar />
        <div className="md:flex w-full p-10 min-h-screen flex-col justify-start">
          <h1 className="text-xl font-bold">User Map Locations</h1>
          <div className='md:flex w-full flex-row justify-start items-start mb-1 '>


            <form action="#" method="POST" className=' mt-6 md:flex w-full flex-row justify-start items-start '>

              <div className='w-1/5'>
                <label className="block text-gray-700 w-1/5">Username</label>
                <select onChange={(e) => console.log(e.target.value)} className="w-full  px-4 py-3 rounded-lg bg-gray-200 mt-2 border focus:border-blue-500 focus:bg-white focus:outline-none">
                  <option value="a">a</option>
                  <option selected value="b">b</option>
                  <option value="c">c</option>
                  <option value="d">d</option>
                </select>
              </div>
              <div className='w-2/5 ml-1'>
                <label className="block text-gray-700 w-full">Locations</label>
                <input
                  type="text"
                  name=""
                  id=""
               
                  placeholder={location}
                  className="w-full px-4 py-3 rounded-lg bg-gray-200 mt-2 border focus:border-blue-500 focus:bg-white focus:outline-none"
                  autofocus=""
                  autoComplete=""
                  required=""
                />
              </div>
              <div className='w-0.5/5 ml-1'>

                <button
                  type="submit"
                  className="w-full block  bg-blue-500 hover:bg-blue-400 focus:bg-blue-400 text-white font-semibold rounded-lg
          px-4 py-3 mt-8"
                >
                  Locations Edit
                </button>
              </div>


            </form>


          </div>
          <div className='w-full h-full'>
          <GoogleMapReact
                bootstrapURLKeys={{ key: "AIzaSyAhkyqtF5czuz-KzzOv3Z8skkl2b_9koDk" }}
                defaultCenter={defaultProps.center}
                defaultZoom={defaultProps.zoom}
                onClick={(e) => {setLatLng(e)}}
                onGoogleApiLoaded={({ map, maps }) => {
                    handleApiLoaded(map, maps);
                }}
                
            >
                {!!latLng ?
                    <>
                        <MapMarker map={map} maps={maps} position={latLng}></MapMarker>
                    </> : <></>

                }
            </GoogleMapReact>

          </div>









        </div>
      </div>
    </>
  )
}



